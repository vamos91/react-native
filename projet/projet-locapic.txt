Locapic est une application mobile permettant de gÃ©olocaliser un utilisateur en matÃ©rialisant ses dÃ©placements sur une carte interactive et en offrant la possibilitÃ© dâ€™y ajouter des points d'intÃ©rÃªt. Lâ€™application permet Ã©galement de rentrer en contact avec lâ€™ensemble des utilisateurs via un chat.


Cette fois-ci vous passerez du cÃ´tÃ© mobile grÃ¢ce Ã  React Native.

Quel avantage ? Vous allez pouvoir crÃ©er de vÃ©ritables applications mobiles disponibles dans les stores.


Pour faciliter le dÃ©veloppement et le dÃ©ploiement sur Android et iOS, vous utiliserez l'environnement Expo. Voyez-le comme une surcouche au-dessus de React Native vous permettant de vous faire gagner du temps.

Avec React Native vous allez voir quâ€™il nâ€™y a pas de changements concernant les principes fondamentaux que vous avez appris sur React et Redux, tout ce que vous avez appris peut sâ€™appliquer Ã  React Native.


La diffÃ©rence va surtout se situer au niveau du JSX. En React Native, il nâ€™est plus question dâ€™utiliser les balises HTML, il faudra donc apprendre de nouvelles balises. Par exemple, on ne dit plus <div> mais <view>â€¦.


Aujourd'hui, vous allez dÃ©couvrir l'environnement Expo et React Native.

Vous allez Ã©galement devoir mettre en place la navigation de lâ€™appli qui se fera grÃ¢ce Ã  la librairie React Navigation.

En utilisant les composants de React Native, vous allez vite vous rendre compte quâ€™ils sont un peu basiques en termes de design. Vous allez utiliser la librairie graphique React Native Elements qui dispose de nombreux composants sympas et customisables trÃ¨s facilement !

Pour finir vous allez revoir Redux, en le mettant en place dans le projet afin de centraliser le pseudo de lâ€™utilisateur qui pourra ainsi Ãªtre utilisÃ© ultÃ©rieurement.


Lâ€™objectif fonctionnel de cette journÃ©e :

PrÃ©parer lâ€™environnement de travail pour dÃ©ployer lâ€™app sur mobile.
Mettre en place la navigation de lâ€™application.
MÃ©moriser le pseudo saisi.
Vos skills tech Ã  lâ€™issue de cette journÃ©e:

Mise en place dâ€™ Expo.
Mettre en place la navigation avec React Router.
Mettre en place Redux.
IntÃ©grer les Ã©crans avec la librairie  React Native Elements.

AperÃ§u de lâ€™app :

   


J'ai fini cette partie
1 - PRÃ‰PARATION DE Lâ€™ENVIRONNEMENT DE TRAVAIL

1.1 Initialiser le projet
ğŸ‘‰ CrÃ©ez le rÃ©pertoire locapic dans le rÃ©pertoire ./lacapsule/project/.

ğŸ‘‰ Initialisez un nouveau projet nommÃ© part1 avec Expo.

ğŸ‘‰ Positionnez-vous sur le rÃ©pertoire part1 via le terminal :

cd ./lacapsule/project/locapic/part1


ğŸ‘‰ Dans le rÃ©pertoire part1, exÃ©cutez la commande expo start pour lancer lâ€™app de base.

1.2 Lancer lâ€™app
3 solutions depuis Expo :


ğŸ‘‰ Directement sur le mobile :

AprÃ¨s avoir tÃ©lÃ©chargÃ© lâ€™application Expo sur le mobile, il faudra, via lâ€™application, scanner le QR Code affichÃ© par Expo. AprÃ¨s un petit temps dâ€™attente, lâ€™application va se lancer. Ã€ chaque fois que vous sauvegardez un changement dans vos fichiers, lâ€™application se relance.


ğŸ‘‰ Avec lâ€™Ã©mulateur :

Il faudra pour cela tÃ©lÃ©charger et installer lâ€™Ã©mulateur mobile.

La configuration dâ€™un Ã©mulateur peut se rÃ©vÃ©ler fastidieuse (notamment sous Windows), privilÃ©giez lâ€™application mobile Expo dans un premier temps.


1.3 Module React Navigation
ğŸ‘‰ Installez tous les modules de React Navigation.





J'ai fini cette partie
2 - MISE EN PLACE DE LA NAVIGATION

Avant de commencer Ã  dÃ©velopper les fonctionnalitÃ©s de lâ€™application, il est primordial de mettre en place la mÃ©canique de navigation.

Le composant React Navigation permet de rÃ©aliser pas mal de choses en termes de navigation. Il fait indÃ©niablement gagner du temps mais il peut vite devenir complexe, surtout quand on mixe plusieurs types de navigation.


L'objectif de cette 2Ã¨me Ã©tape:

Mettre en place la navigation avec React Navigation.


Instructions

2.1 Overview de la navigation
ğŸ‘‰ SchÃ©matisez sur papier l'enchaÃ®nement des Ã©crans pour avoir une vision claire de la navigation.

ğŸ‘‰ DÃ©terminez le type de composants de navigation Ã  utiliser pour chaque partie.


2.2 CrÃ©er les Ã©crans
ğŸ‘‰ Dans un rÃ©pertoire nommÃ© screens, mettez en place les composants reprÃ©sentant les diffÃ©rents Ã©crans. Au total, crÃ©ez 3 Ã©crans : 

HomeScreen pour lâ€™Ã©cran reprÃ©sentant la home.
MapScreen pour lâ€™Ã©cran reprÃ©sentant la carte interactive.
ChatScreen pour lâ€™Ã©cran reprÃ©sentant la messagerie instantanÃ©e (chat).


ğŸ‘‰ RÃ©alisez des intÃ©grations trÃ¨s minimalistes. Lâ€™objectif est simplement dâ€™avoir un texte qui sâ€™affiche au centre afin dâ€™indiquer le nom du lâ€™Ã©cran.





2.3 Les composants de navigation
ğŸ‘‰ Dans le composant principal de lâ€™app, importez les composants de navigation prÃ©cÃ©demment identifiÃ©s.

ğŸ‘‰ Initialisez les composants de navigation avec les Ã©crans associÃ©s.

Câ€™est Ã  cette Ã©tape quâ€™il faut imbriquer les composants de navigation.




ğŸ‘‰ DÃ©sactivez le menu du haut sur lâ€™ensemble de la navigation.



2.4 Customiser le menu
ğŸ‘‰ Mettez en place les pictos correspondants Ã  lâ€™image suivante. Attention ! Il faut importer le module de la librairie du picto choisi.





ğŸ‘‰ Modifiez les couleurs des icons :

Pour le statut inactif appliquez la couleur #FFFFFF.
Pour le statut actif appliquez la couleur #eb4d4b.
ğŸ‘‰ Sur le menu, appliquez la couleur de fond #130f40.






J'ai fini cette partie
3 - INTÃ‰GRATION DES Ã‰CRANS

La navigation est maintenant en place !

Vous pouvez dÃ©sormais naviguer sur lâ€™app.

LÃ , les diffÃ©rents Ã©crans qui sâ€™affichent sont un peuâ€¦ fades. ğŸ˜

Allez, retroussez vos manches pour rendre lâ€™app un peu plus sexy ! ğŸ˜


L'objectif de cette 3Ã¨me Ã©tape:

IntÃ©grer les Ã©crans Home et Chat en respectant le plus possible les maquettes.


Instructions


3.1 React Native Elements
ğŸ‘‰ Installez le module React Native Elements.



3.2 Ã‰cran de la Home
ğŸ‘‰ Sur le composant qui reprÃ©sente lâ€™Ã©cran de la Home, importez le module React Native Elements.

ğŸ‘‰ Sur ce mÃªme composant, mettez en place le champ de saisie pour le pseudo ainsi que le bouton. Regardez bien la documentation car vous allez devoir les customiser pour quâ€™ils se rapprochent le plus possible de la maquette.


ğŸ‘‰ Mettez en place lâ€™image de fond.




3.3 IntÃ©grer lâ€™Ã©cran du Chat
ğŸ‘‰ Sur le composant qui reprÃ©sente lâ€™Ã©cran du chat, importez le module React Native Element.

ğŸ‘‰ Sur ce mÃªme composant, mettez en place une liste qui reprÃ©sentera lâ€™ensemble des messages reÃ§us.



ğŸ‘‰ En respectant les contraintes de la maquette, mettez en place un champ de saisie et un bouton de validation.



import React from 'react';
import { View, ScrollView, KeyboardAvoidingView } from 'react-native';
import {Button, ListItem, Input} from 'react-native-elements';
import Icon from 'react-native-vector-icons/FontAwesome';

export default function ChatScreen() {
 return (
   <View style={{flex:1}}>
     
     <ScrollView style={{flex:1, marginTop: 50}}>
       <ListItem>
         <ListItem.Content>
           <ListItem.Title>Parfait et toi ?</ListItem.Title>
           <ListItem.Subtitle>Alex</ListItem.Subtitle>
         </ListItem.Content>
       </ListItem>
       <ListItem>
         <ListItem.Content>
           <ListItem.Title>Coucou Ã§a roule ?</ListItem.Title>
           <ListItem.Subtitle>John</ListItem.Subtitle>
         </ListItem.Content>
       </ListItem>
     </ScrollView >

     <KeyboardAvoidingView

        behavior={Platform.OS === "ios" ? "padding" : "height"}>
         <Input
             containerStyle = {{marginBottom: 5}}
             placeholder='Your message'
         />
         <Button
             icon={
                 <Icon
                 name="envelope-o"
                 size={20}
                 color="#ffffff"
                 />
             }
             title="Send"
             buttonStyle={{backgroundColor: "#eb4d4b"}}
             type="solid"
         />
     </KeyboardAvoidingView>
       
   </View>
 );
}



J'ai fini cette partie
4 - ENREGISTREMENT DU PSEUDO DANS LE STORE

Lâ€™application commence Ã  prendre forme.

On va pouvoir revenir sur Redux ! Vous allez vite vous rendre compte quâ€™il est difficile de sâ€™en passer. ğŸ˜‰

Le pseudo saisi par l'utilisateur sur la Home est une information quâ€™il faudra utiliser plusieurs fois.

Il vous faudra donc Redux pour rendre cette information accessible Ã  lâ€™ensemble des composants de lâ€™app.


L'objectif de cette 4Ã¨me Ã©tape:

Enregistrer le pseudo de lâ€™utilisateur dans le store de Redux.


Instructions

4.1 ParamÃ©trer le champ de saisie
ğŸ‘‰ Initialisez un Ã©tat nommÃ© pseudo. Cet Ã©tat va servir Ã  stocker la valeur du champ de saisie pour le pseudo.

ğŸ‘‰ Mettez en place la mÃ©canique permettant de capter les changements sur le champ de saisie afin de mettre Ã  jour lâ€™Ã©tat associÃ©.



4.2 Installer et initialiser Redux
ğŸ‘‰ Installez les modules nÃ©cessaires pour utiliser Redux avec React Native.

ğŸ‘‰ Importez les modules nÃ©cessaires dans le fichier qui contient le composant Home.

4.3 Envoyer un pseudo dans Redux (lâ€™action).
ğŸ‘‰ Dans le mÃªme fichier, mettez en place le composant conteneur qui va â€œencapsulerâ€ Home.

ğŸ‘‰ ParamÃ©trez le composant conteneur avec une fonction permettant dâ€™envoyer des informations Ã  Redux.



ğŸ‘‰ Dans cette fonction, dÃ©finissez un bloc de code nommÃ© setPseudo. Cette fonction va devoir recevoir la valeur du pseudo afin de dÃ©clencher une action nommÃ©e savePseudo qui enverra lâ€™information auprÃ¨s de Redux. 




ğŸ‘‰ Mettez en place la mÃ©canique qui permet de dÃ©clencher lâ€™action au moment oÃ¹ lâ€™utilisateur clique sur le bouton de validation.



ğŸ‘‰ Modifiez lâ€™export pour lâ€™appliquer au composant conteneur.




ğŸ‘‰ A la racine du projet, crÃ©ez un rÃ©pertoire reducers.

ğŸ‘‰ CrÃ©ez dans ce rÃ©pertoire un fichier pseudo.js.

ğŸ‘‰ Dans ce fichier, crÃ©ez la fonction rÃ©ducteur qui permet de rÃ©agir Ã  lâ€™action â€œsavePseudoâ€ envoyÃ©e prÃ©cÃ©demment.

ğŸ‘‰ Mettez en place dans cette fonction une mÃ©canique permettant de sauvegarder le pseudo reÃ§u dans un Ã©tat du store.



ğŸ‘‰ Renvoyez au store la nouvelle valeur de lâ€™Ã©tat.



4.4 Enregistrer un pseudo dans redux (le store)
Dans le fichier App (composant principal de lâ€™application), importez les composants nÃ©cessaires pour mettre en place le store.




ğŸ‘‰ Importez le reducer prÃ©cÃ©demment crÃ©Ã©.

ğŸ‘‰ Initialisez le store avec le reducer importÃ©. ParamÃ©trez le reducer pour quâ€™il soit associÃ© Ã  lâ€™Ã©tat du store nommÃ© userPseudo.



ğŸ‘‰ Mettez en place le store sur l'ensemble de lâ€™application.